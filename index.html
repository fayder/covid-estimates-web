

<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Covid Cases Estimates</title>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css">
      <link href="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/sticky-header/bootstrap-table-sticky-header.css" rel="stylesheet">
      <style type="text/css" media="screen">
         .table thead th {
          vertical-align: middle;
         }
        .active a {
          color: white;
          text-decoration: underline;
         }
      </style>
   </head>
   <body>
    
      <div class="container-fluid">
         <h1 style="text-align: center; margin: 32px;">Covid Cases Estimates</h1>

          <div class=".container-lg">
              <h5>Choose an Infection Fatality Rate (IFR)</h5>
              <div class="list-group">
                <button id="btn_medrxiv" type="button" 
                  class="list-group-item list-group-item-action active"
                  data-toggle="list">
                  Medrxiv - IFR 0.66% (0.39%, 1.33%) - 
                  <a class="source_link" href="https://www.medrxiv.org/content/10.1101/2020.03.09.20033357v1" title="source" target="_blank">Source</a>
                </button>
                <button id="btn_imperial" type="button" class="list-group-item list-group-item-action" 
                  data-toggle="list">
                  Imperial College - IFR 0.9% (0.4%, 1.4%) - 
                  <a class="source_link" href="https://www.cebm.net/wp-content/uploads/2020/03/Impact-assessment-of-non-pharmaceutical-interventions-NPIs-to-reduce-COVID-19-mortality-and-healthcare-demand-.pdf" title="source">Source</a>
                </button>
                <button id="btn_cebm" type="button" 
                  class="list-group-item list-group-item-action"
                  data-toggle="list">
                  CEBM - IFR (0.1% - 0.41%) - 
                  <a class="source_link" href="https://www.cebm.net/covid-19/global-covid-19-case-fatality-rates" title="source">Source</a>
                </button>
                <button id="btn_iceland" type="button" 
                class="list-group-item list-group-item-action"
                data-toggle="list">
                  Iceland - IFR (0.03% - 0.28%) -
                  <a class="source_link" href="https://www.cebm.net/covid-19/global-covid-19-case-fatality-rates" title="source">Source</a>
                </button>
              </div>
            </div>

         <div class="table-responsive" style="margin-bottom: 32px;">
            <table id="countries" style="text-align: center;" class="table-fixed"
               data-search="true"
               data-show-columns="true"
               data-sort-priority='[{“sortName”: cases,”sortOrder”:”desc”}]'
               data-custom-sort="customSort"
               data-sticky-header="true"
               data-sticky-header-offset-left="14px"
               data-sticky-header-offset-right="14px"
               data-url="https://covid-estimates-backend.herokuapp.com/medrxiv">
               <thead class="sticky-header">
                  <tr>
                     <th scope="col" data-field="name" data-sortable="true" class="col-2">Country</th>
                     <th scope="col" data-field="population" data-sortable="true" class="col-1">Population</th>
                     <th scope="col" data-field="cases" data-sortable="true" class="col-1">Reported cases</th>
                     <th scope="col" data-field="deaths" data-sortable="true" class="col-1">Reported deaths</th>
                     <th scope="col" data-field="reported_cfr" data-sortable="true" class="col-1">Reported CFR</th>
                     <th scope="col" data-field="ifr_range" data-sortable="false" class="col-2">Estimated cases (min-max)</th>
                     <th scope="col" data-field="single_ifr" data-sortable="true" class="col-2">Estimated cases (single)</th>
                     <th scope="col" data-field="population_percentage_single" data-sortable="true" class="col-1">
                      Estimated % of <br> population infected (single)</th>
                     <th scope="col" class="col-1">Estimated % of <br> population infected (min-max)</th>
                  </tr>
               </thead>
               <tbody>
               </tbody>
            </table>
         </div>
      </div>
      <script
         src="https://code.jquery.com/jquery-3.5.0.min.js"
         integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ="
         crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
      <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>
      <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/multiple-sort/bootstrap-table-multiple-sort.js"></script>
      <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/sticky-header/bootstrap-table-sticky-header.js"></script>
      <script src="covid_estimates.js" type="text/javascript" charset="utf-8"></script>
      <script>
        function customSort(sortName, sortOrder, data) {
        var order = sortOrder === 'desc' ? -1 : 1;
        data.sort(function(a, b) {
            var firstvalue = a[sortName] + '';
            var secondvalue = b[sortName] + '';
            var aa;
            var bb;
            if (firstvalue.includes(',') || secondvalue.includes(',')) {
                if (firstvalue == 'null') {
                    firstvalue = '0.0'
                }
                if (secondvalue == 'null') {
                    secondvalue = '0.0'
                }
                aa = +((firstvalue).replace(/,/g, ''));
                bb = +((secondvalue).replace(/,/g, ''));
            } else if (firstvalue.includes('%') || secondvalue.includes('%')) {
                if (firstvalue == 'null') {
                    firstvalue = '0.000%'
                }
                if (secondvalue == 'null') {
                    secondvalue = '0.000%'
                }
                aa = +((firstvalue).replace(/%/g, ''));
                bb = +((secondvalue).replace(/%/g, ''));
            } else {
                if (firstvalue == 'null') {
                    firstvalue = '0.0'
                }
                if (secondvalue == 'null') {
                    secondvalue = '0.0'
                }
                aa = firstvalue;
                bb = secondvalue;
            }
            if (aa < bb) {
                return order * -1;
            }
            if (aa > bb) {
                return order;
            }
            return 0;
        });
    }
      </script>
   </body>
</html>

